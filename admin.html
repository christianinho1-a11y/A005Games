<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Admin Panel – CS & IT Games</title>
  <link rel="stylesheet" href="style.css" />
  <script defer src="admin.js"></script>
</head>
<body class="cs-body">
  <a href="index.html" class="back-link">← Back to Home</a>

  <main class="page-wrap">
    <header class="page-header">
      <div>
        <h1 class="page-title">// Admin Panel</h1>
        <p class="page-subtitle">
          Manage games &amp; leaderboards
          <span class="tag">Teacher Only</span>
        </p>
      </div>
    </header>

    <!-- LOGIN CARD -->
    <section class="layout-grid" id="loginSection">
      <section class="card card-main" style="max-width: 480px; margin-inline: auto;">
        <header class="card-header">
          <h2 class="card-title">Admin Login</h2>
          <p class="card-subtitle">
            Enter the admin code to manage games and leaderboards.
          </p>
        </header>

        <div class="sub-card">
          <label for="adminCodeInput" class="sub-card-title" style="margin-bottom: 0.5rem;">
            Admin Code
          </label>
          <input
            type="password"
            id="adminCodeInput"
            class="input"
            placeholder="Enter admin code"
          />
          <div class="button-row" style="margin-top: 1rem;">
            <button id="adminLoginBtn" class="btn">Login</button>
          </div>
          <p id="loginError" class="sub-card-meta" style="color:#f97373; margin-top:0.5rem; display:none;">
            Incorrect code. Try again.
          </p>
          <p class="sub-card-meta small" style="margin-top:0.75rem;">
            Hint: classroom-only admin code. (You set this as <strong>A005</strong>.)
          </p>
        </div>
      </section>
    </section>

    <!-- ADMIN DASHBOARD -->
    <section class="layout-grid" id="adminSection" hidden>
      <!-- LEFT COLUMN: Game registry + file creator -->
      <section class="card card-main">
        <header class="card-header">
          <h2 class="card-title">Games Registry</h2>
          <p class="card-subtitle">
            Add, view, and remove games. Clear leaderboards. Generate files on WAMP.
          </p>
        </header>

        <!-- Add game form (registry only) -->
        <div class="sub-card">
          <h3 class="sub-card-title">Register Existing Game</h3>
          <div class="form-row stacked">
            <label for="gameNameInput">Display Name</label>
            <input
              id="gameNameInput"
              type="text"
              class="input"
              placeholder="e.g. If / Else Escape Room"
            />

            <label for="gameFileInput">HTML File Name</label>
            <input
              id="gameFileInput"
              type="text"
              class="input"
              placeholder="e.g. if_else_escape.html"
            />

            <label for="gameCategorySelect">Category</label>
            <select id="gameCategorySelect" class="input">
              <option value="cs">Computer Science</option>
              <option value="it">Information Technology</option>
              <option value="cyber">Cyber Security</option>
            </select>

            <p class="sub-card-meta small">
              The admin panel auto-generates a
              <strong>leaderboard key</strong> from the file name.<br />
              Example: <code>if_else_escape.html → if_else_escape_leaderboard</code><br />
              Use that key in the game’s JS when you set up its leaderboard.
            </p>

            <button id="addGameBtn" class="btn">Register Game</button>
          </div>
        </div>

        <!-- Create new files on WAMP -->
        <div class="sub-card">
          <h3 class="sub-card-title">Create New Game Files (WAMP)</h3>
          <p class="sub-card-meta small">
            This uses <code>save_game.php</code> on your WAMP server to create
            a new HTML + JS file in this folder. Use carefully.
          </p>

          <form
            action="save_game.php"
            method="post"
            class="form-row stacked"
            target="_blank"
          >
            <label for="newGameName">Game Name (for your reference)</label>
            <input
              id="newGameName"
              name="game_name"
              type="text"
              class="input"
              placeholder="e.g. Boolean Battle"
              required
            />

            <label for="newHtmlFile">HTML File Name</label>
            <input
              id="newHtmlFile"
              name="html_file"
              type="text"
              class="input"
              placeholder="e.g. boolean_battle.html"
              required
            />

            <label for="newJsFile">JS File Name</label>
            <input
              id="newJsFile"
              name="js_file"
              type="text"
              class="input"
              placeholder="e.g. boolean_battle.js"
              required
            />

            <label for="htmlCodeArea">HTML Code</label>
            <textarea
              id="htmlCodeArea"
              name="html_code"
              class="input"
              rows="8"
              placeholder="Paste full HTML here"
              required
            ></textarea>

            <label for="jsCodeArea">JS Code</label>
            <textarea
              id="jsCodeArea"
              name="js_code"
              class="input"
              rows="8"
              placeholder="Paste full JavaScript here"
              required
            ></textarea>

            <p class="sub-card-meta small">
              After submitting, files will be written into this folder on your
              WAMP server. You can then register the game above so its
              leaderboard can be managed here.
            </p>

            <button type="submit" class="btn">
              Create Files on Server
            </button>
          </form>
        </div>

        <!-- Game list -->
        <div class="sub-card">
          <h3 class="sub-card-title">Registered Games</h3>
          <ul id="gameList" class="info-list">
            <!-- Filled by JS -->
          </ul>

          <button id="clearAllLbBtn" class="btn btn-small btn-danger">
            Clear All Leaderboards in Registry
          </button>
        </div>
      </section>

      <!-- RIGHT COLUMN: Leaderboard tools / notes -->
      <aside class="sidebar">
        <section class="card">
          <header class="card-header">
            <h2 class="card-title">How This Works</h2>
          </header>
          <ul class="info-list">
            <li>
              <strong>Login:</strong> Admin code is <code>A005</code>. Until
              that is entered, the admin tools stay hidden.
            </li>
            <li>
              <strong>Registry:</strong> Each game is stored in
              <code>localStorage</code> on this browser as metadata
              (name/file/category/leaderboardKey).
            </li>
            <li>
              <strong>Leaderboards:</strong> Each game gets a
              <code>leaderboardKey</code>. Your game JS should use the same
              key when saving scores.
            </li>
            <li>
              <strong>File Creator:</strong> The “Create New Game Files” section
              posts to <code>save_game.php</code> (PHP) which writes the HTML +
              JS files into this folder on your WAMP server.
            </li>
            <li>
              <strong>Security note:</strong> This is designed for a local
              classroom WAMP setup, not a public web server.
            </li>
          </ul>
        </section>
      </aside>
    </section>
  </main>
</body>
</html>

